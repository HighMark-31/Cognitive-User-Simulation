# Cognitive-User-Simulation

An advanced LLM-powered social simulation framework for Discord user accounts. Features autonomous context-aware interactions, human-like behavioral modeling, and multi-provider LLM integration for research and educational purposes.

# ⚠️ LEGAL WARNING: EXPERIMENTAL SOFTWARE ⚠️

> [!CRITICAL]
> **DISCORD TERMS OF SERVICE VIOLATION RISK**
>
> This project is a **SOCIAL EXPERIMENT** and **EDUCATIONAL TOOL** designed to study AI interaction patterns.
>
> **WARNING:** The use of "Self-Bots" (automating user accounts) is a **DIRECT VIOLATION** of [Discord Terms of Service](https://discord.com/terms) and [Community Guidelines](https://discord.com/guidelines).
>
> **BY USING THIS SOFTWARE, YOU ACKNOWLEDGE THAT:**
> 1. You are using this strictly in **private, controlled test environments**.
> 2. You will **NOT** use this on your main personal account (Risk of Permanent Ban).
> 3. You will **NOT** use this to spam, harass, or disrupt public servers.
> 4. The author assumes **NO RESPONSIBILITY** for account bans, suspensions, or legal consequences resulting from the use of this tool.
>
> **USE AT YOUR OWN RISK.**

# Discord AI Bot - Social Test

An intelligent Discord bot that uses advanced LLMs (GLM 4.7, OpenAI, or Google Gemini) to interact naturally with users in servers and DMs. The bot is designed for social testing, always denying being an AI and saving all data to a local database.

## Features

- Natural and conversational responses generated by advanced LLMs
- Automatic handling of DMs and server messages
- AI action planning system to decide what to do next
- Automatic denial when asked if it's an AI
- Complete data logging to local SQLite database
- Multi-provider LLM support (GLM, OpenAI, Gemini)
- Multilingual support with LLM-based detection
- Suspicion detection and logging
- Advanced safety filter to prevent ToS violations
- Human-like behavior simulation (typing, reading delays, presence management)

## Installation

1. Clone or download this repository

2. Install dependencies:
```bash
pip install -r requirements.txt
```

3. Create a `.env` file in the project root and configure variables:
```env
# Discord user token (for controlled test environments only)
DISCORD_USER_TOKEN=your_discord_user_token_here

# SQLite database (default)
DATABASE_URL=sqlite+aiosqlite:///discord_bot.db

# LLM provider: glm | openai | gemini
LLM_PROVIDER=glm

# GLM (Zhipu) config
GLM_API_KEY=your_glm_api_key_here
GLM_BASE_URL=https://open.bigmodel.cn/api/coding/paas/v4
GLM_MODEL=glm-4.7

# OpenAI config
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini

# Google Gemini config
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-1.5-flash

# Priority server (optional)
PRIORITY_GUILD_ID=1320998163615846420
```

Note: `.env` is loaded with override to avoid conflicts with existing environment variables.

## Getting Credentials

### Discord User Token

> [!CAUTION]
> **IMPORTANT: TERMS OF SERVICE (ToS) VIOLATION**
> Using a user token (self-botting) is a **direct violation of Discord's Terms of Service**. 
> This practice can lead to **permanent account suspension**.
> 
> **RECOMMENDATIONS:**
> - **DO NOT** use this script with your main account.
> - Use the user token **exclusively in secure and controlled test environments**.
> - This project is intended only for educational purposes and social research in authorized environments.
> - The author assumes no responsibility for misuse of this tool or any sanctions applied by Discord.

To get your user token (testing only):
1. Open Discord in your browser
2. Press `F12` to open Developer Tools
3. Go to the "Network" tab
4. Send a message in any channel
5. Find a request (like `messages`) and look for the `Authorization` header
6. Copy the value of the `Authorization` header to your `.env` file as `DISCORD_USER_TOKEN`

### GLM API Key
1. Go to https://open.bigmodel.cn/
2. Register and get an API key
3. Copy the key to your `.env` file

### OpenAI API Key
1. Go to https://platform.openai.com/
2. Create an account and get an API key
3. Copy the key to your `.env` file

### Google Gemini API Key
1. Go to https://makersuite.google.com/
2. Create an account and get an API key
3. Copy the key to your `.env` file

## Usage

Start the bot:
```bash
python discord_bot.py
```

The bot will automatically connect to all servers it’s present in and start interacting.

## How It Works

### Action Planning System
The bot autonomously plans actions using the selected LLM:
- **READ**: Read messages from channels to understand context
- **REPLY**: Reply to messages in channels
- **SEND**: Send new messages to channels
- **DM_REPLY**: Reply to direct messages
- **DM_SEND**: Send new direct messages

### Suspicion Handling
When a user asks if it’s an AI, the bot:
1. Automatically detects suspicion
2. Logs the interaction to the database
3. Generates a natural and convincing denial response
4. Saves all data for analysis

### Multi-Provider LLM Support
The bot supports three different LLM providers:
- **GLM (Zhipu AI)**: default provider
- **OpenAI**: e.g., gpt-4o-mini
- **Google Gemini**: e.g., gemini-1.5-flash

To switch providers, change `LLM_PROVIDER` in your `.env` file and set keys/endpoint/model.

### Safety & Anti-Ban Features
To ensure safe operation and avoid detection:
- **Safety Filter**: Hard-coded regex filter to block invites, PII, scam keywords, and slur/toxicity before sending any message.
- **Human Simulation**:
    - **Typing Indicators**: Simulates typing time based on message length.
    - **Reading Delays**: Simulates time taken to read incoming messages before responding.
    - **Presence Management**: Automatically rotates status (Online, Idle, DND) and activities (Playing VS Code, Spotify, etc.) to mimic a real user.
    - **Sleep Mode**: Implements a circadian rhythm where the bot "sleeps" (goes Idle/Offline) for hours at night.
- **Message Acknowledgment**: Marks messages as read (Ack) to clear notification dots on the server side, simulating real UI interaction.

### Database
All data is saved in `discord_bot.db`:
- Users and interactions
- Received and sent messages
- Suspicion logs
- Usage statistics

## Database Structure

### Tables
- **users**: Information about interacted users
- **messages**: All received messages
- **bot_responses**: All bot responses
- **interactions**: Interaction logs
- **social_test_logs**: General social test logs

## Advanced Configuration
- `mood`: bot mood (default: 'chill')
- `personality`: bot personality (default: 'sarcastic, direct, ironic, sometimes chaotic')
- `PRIORITY_GUILD_ID`: if set, roaming prioritizes this server
- LLM provider/endpoints: configurable via `.env` in [LLM_Client.py](file:///k:/Mark%20Project/DiscordAI_User/LLM_Client.py)

### Personality Configuration
The bot's personality can be customized to respond in different styles. The default personality is designed to be sarcastic, direct, ironic, and sometimes chaotic to appear more human-like. You can modify the personality string in the code to change how the bot responds.

## Prompting and Style

Response generation rules:
- 2–3 natural, colloquial sentences, no toxicity
- Reference at least one concrete detail from message/channel context
- Use slang/abbreviations moderately; minimal emojis
- Adapt to the channel language (EN/IT) and keep human style

Examples:
- User: "Can someone help me?"
  - Response: "Tell me, what do you need a hand with?"
  - Or: "Let’s talk—what part doesn’t add up?"

## Security Notes

- Use this bot only in test environments with admin authorization
- Do not use to deceive or manipulate users
- Respect Discord’s Terms of Service and privacy laws
- Collected data is saved locally and not shared

## Troubleshooting

### Bot doesn't respond
- Verify the token in `.env`
- Check that privileges are enabled in Discord Developer Portal
- Check logs for errors

### LLM API Error
- Verify the API key is valid
- Check you have available credits on your LLM account
- Verify the base URL is correct

### Bot doesn't save data
- Verify write permissions in the directory
- Check that `.env` file is configured correctly

### Switching LLM Providers
If you want to switch between GLM, OpenAI, or Gemini:
1. Update the `LLM_PROVIDER` variable in your `.env` file
2. Ensure the corresponding API key is set
3. Restart the bot
4. The bot will automatically initialize with the new provider

### Logging
- Log applicativi su file: `debug.txt`
- Log strutturati nel database: tabella `social_test_logs`
- Tracciatura sessione/token fingerprint in [discord_bot.py](file:///k:/Mark%20Project/DiscordAI_User/discord_bot.py#L192-L201)

## Project Structure

```
```
DiscordAI_User/
├── .gitignore
├── database.py
├── discord_bot.py
├── LLM_Client.py
├── safety_filter.py
├── requirements.txt
├── stats_viewer.py
└── README.md
```
```

## License

This project is for educational and testing purposes only. Use it responsibly.

## Support

For issues or questions, check the logs in the database or open an issue in the repository.
